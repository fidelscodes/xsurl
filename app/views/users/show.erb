<h1><%= @user.username %>'s Dashboard</h1>
<br>
<!-- Display flash[:notice] if present -->
<% if flash.has?(:notice) %>
<div class="alert alert-dismissible alert-success">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <p><%= flash[:notice] %><strong><%= @user.username %></strong>!</p>
  <p>From this page you can create, edit, and delete your xsURLs.</p>
  <p>Go on... Create your first one below.</p>
</div>
<% end %>

<form class="form-horizontal" action="/links/new" method="post">
  <fieldset>
    <legend>Create a new link</legend>
    <div class="form-group">
      <!-- <label for="new_link" class="col-sm-2 control-label"></label> -->
      <div class="col-sm-10 col-sm-offset-1">
        <input type="text" class="form-control" name= "url" id="new_link" placeholder="Enter URL to shrink" autofocus required>
      </div>
    </div>
    <div class="form-group">
     <div class="col-sm-10 col-sm-offset-1">
       <button type="reset" class="btn btn-default">Clear</button>
       <button type="submit" class="btn btn-primary">Create</button>
     </div>
   </div>
  </fieldset>
</form>
<br><br>

<!-- Display Created Links -->
<% if !@user.links.empty? %>
<h2>Your created links are below:</h2>
<hr>
<ol>
  <% @user.links.each do |link| %>
  <li class="well well-sm col-sm-8 col-sm-offset-1"><a href="/<%= link.random_hex_string %>"><%= link.short_url %></a></li>
  <div class="form-group">
   <!-- <div class="col-sm-10 col-sm-offset-1"> -->
      <button type="button" class="btn btn-default">Copy</button>
      <a href="/links/<%= link.id %>/edit" style="padding-left: 5px"><button type="submit" class="btn btn-warning">Edit</button></a>
      <form action="/links/<%= link.id %>/delete" style="display: inline-block">
        <input id="hidden" type="hidden" name="_method" value="delete">
      <button type="submit" class="btn btn-danger">Delete</button>
      </form>
    <!-- </div> -->
  </div>
  <% end %>
</ol>
<% end %>

<!-- JavaScript for Clipboard.js | Copy to Clipboard -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/clipboard.js/1.5.12/clipboard.min.js"></script>
<script>
  var clipboard = new Clipboard('.btn');
  clipboard.on('success', function(e) {
    console.log(e);
  });
  clipboard.on('error', function(e) {
    console.log(e);
  });
</script>
